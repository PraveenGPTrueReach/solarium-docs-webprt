<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>SERVICES_MODULE.md</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Noto Sans, "Apple Color Emoji", "Segoe UI Emoji"; margin: 2rem; line-height: 1.6; }
  pre { background:#f6f8fa; padding:1rem; overflow:auto; }
  code { background:#f6f8fa; padding:0.1rem 0.3rem; }
  a { color:#0b5fff; text-decoration:none; }
  a:hover { text-decoration:underline; }
  .container { max-width: 1100px; margin: auto; }
  hr { margin: 2rem 0; }
</style>
</head>
<body>
<div class="container">
<h1>Services Catalog Module</h1>
<p>The Services Catalog module provides a comprehensive Admin interface for managing service offerings available to customers in the mobile app.</p>
<h2>Overview</h2>
<p>This module implements the complete CRUD (Create, Read, Update, Delete) workflow for service management, including:</p>
<ul>
<li><strong>Service Grid</strong>: Virtualized, filterable table of services</li>
<li><strong>Service Form</strong>: Dialog for creating and editing services</li>
<li><strong>Service Preview</strong>: Customer app preview functionality</li>
<li><strong>Image Upload</strong>: Integrated image management with SAS tokens</li>
<li><strong>Status Management</strong>: Service activation/deactivation</li>
<li><strong>Audit Logging</strong>: Complete audit trail for all operations</li>
</ul>
<h2>Components</h2>
<h3>ServiceGrid</h3>
<p>The main interface for viewing and managing services.</p>
<p><strong>Features:</strong></p>
<ul>
<li>Virtualized rendering for performance with large datasets</li>
<li>Real-time search and filtering (by type, status, name)</li>
<li>URL persistence for filter state</li>
<li>Bulk operations support</li>
<li>Accessibility compliant (WCAG 2.1 AA)</li>
<li>Responsive design for desktop and tablet</li>
</ul>
<p><strong>Usage:</strong></p>
<pre><code class="language-tsx">&lt;ServiceGrid
  onServiceAdd={() =&gt; setDialogOpen(true)}
  onServiceEdit={(service) =&gt; editService(service)}
  onServiceView={(service) =&gt; previewService(service)}
/&gt;
ServiceFormDialog
Modal dialog for creating and editing services.

Features:

  Dual mode: Create new or edit existing services
  Comprehensive form validation (Yup schema)
  Image upload with preview
  Real-time field validation
  Accessibility features (focus management, keyboard navigation)
  Content sanitization for security

Validation Rules:

Name: Required, 1-100 characters
Description: Required, 10-500 characters (auto-sanitized)
Type: Required selection from predefined options
Price Range: Min ≥ 0, Max ≥ Min
Image: Optional, 5MB limit, JPG/PNG only

ServicePreviewCard
Shows how a service appears to customers in the mobile app.

Features:

Pixel-perfect mobile app representation
Image handling with fallback avatars
Price formatting with currency symbols
Clear status indicators
Responsive card design

ServicePreviewModal
Full-screen preview modal for detailed service review.

Features:

Mobile app simulation frame
Accessibility compliant modal
Keyboard navigation support
Focus trap implementation
ESC key and backdrop close

API Integration
Endpoints Used

GET /api/v1/services - List services with filtering
POST /api/v1/services - Create new service
PATCH /api/v1/services/{id} - Update service
PATCH /api/v1/services/{id}/deactivate - Deactivate service
DELETE /api/v1/services/{id} - Soft delete service
POST /api/v1/sas/upload - Get SAS token for image upload

Real-time Updates

60-second polling for automatic refresh
Immediate cache invalidation on mutations
Cross-tab synchronization via BroadcastChannel
Optimistic updates for better UX

State Management
RTK Query Integration
All API calls use RTK Query for:

Automatic caching and invalidation
Loading states
Error handling
Background refetching

URL State Persistence
Filter states persist in URL query parameters:

type - Service type filter
active - Active/inactive status filter
search - Search query

Form State
Service forms use Formik for:

Field validation
Form state management
Submission handling
Error display

Security Features
Authentication &amp; Authorization
Admin-only access enforcement
JWT token validation on all requests
Role-based UI component rendering

Content Sanitization

Description field auto-sanitized using DOMPurify
XSS protection on user inputs
Safe HTML rendering

File Upload Security
SAS token-based Azure Blob upload
File type validation (images only)
Size limits (5MB maximum)
Secure upload URLs with expiration

Performance Optimizations
Virtualization
react-window for large service lists
Maintains &lt;30ms render time for 1000+ items
Efficient memory usage

Caching Strategy
RTK Query automatic caching
60-second background refresh
Stale-while-revalidate pattern

Image Optimization
Lazy loading for service images
Progressive enhancement
Fallback avatars for missing images

Accessibility Features

WCAG 2.1 AA Compliance
All components pass axe accessibility audits
Keyboard navigation support
Screen reader compatibility
Proper ARIA labels and roles

Focus Management

Focus trap in modals
Logical tab order
Focus restoration on dialog close
Visual focus indicators

Keyboard Support

Full keyboard navigation
Standard shortcuts (ESC to close, Enter to submit)
Arrow key navigation in dropdowns

Error Handling
API Errors

Graceful degradation on API failures
User-friendly error messages
Retry mechanisms with exponential backoff
Network connectivity awareness

Validation Errors

Real-time field validation
Clear error messaging
Field-level error states
Form submission prevention when invalid

Upload Errors

File type/size validation
Upload progress indication
Error recovery options
Timeout handling

Testing Strategy

Unit Tests

Component rendering and behavior
Hook functionality
API endpoint integration
Form validation logic

Integration Tests

Complete user workflows
API mock integration
Error scenario testing
Accessibility validation

E2E Tests

Full CRUD workflow automation
Cross-browser compatibility
Mobile responsiveness
Performance benchmarks

Browser Support

Supported Browsers

Chrome 90+
Firefox 88+
Safari 14+
Edge 90+

Mobile Support

iOS Safari 14+
Chrome Mobile 90+
Samsung Internet 14+

Progressive Enhancement

Core functionality without JavaScript
Graceful degradation for older browsers
Responsive design for all screen sizes
</code></pre>

</div>
</body>
</html>